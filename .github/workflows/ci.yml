name: Continious Integration
on:
  pull_request:
    branches:
      - master
    paths-ignore:
      - '**.md'
      - '**.yml'
jobs:
  compile:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Setup Scala
      uses: olafurpg/setup-scala@v5
    - name: Compile
      run: sbt compile
    - name: Check Scala Format
      run: sbt scalafmtCheckAll
    - name: Check Sbt Format
      run: sbt scalafmtSbtCheck
    - name: Unit Test with Coverage
      run: |
        sbt coverage test
        sbt coverageReport
    - name: Scapegoat
      run: sbt scapegoat
    - name: Scala Style
      run: sbt scalastyle
    - name: SonarCloud Scan
      uses: sonarsource/sonarcloud-github-action@master
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
